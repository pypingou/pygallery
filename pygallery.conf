# /etc/httpd/conf.d/gallery.conf
# This configuration assumes your pygallery container is accessible
# internally via http://<container_internal_ip>:5000/

<VirtualHost *:80>
    ServerName your_domain_or_server_ip # e.g., example.com

    ProxyPreserveHost On
    ProxyRequests Off

    # Get container's internal IP with: podman inspect pygallery-app | grep -i "IPAddress"
    # Example IP: 172.17.0.2 (this will vary based on your Podman network)

    # IMPORTANT: Replace <BASE_URL_PREFIX> with the exact value
    # you have set in your config.ini (e.g., /gallery, /myphotos, etc.)
    # If BASE_URL_PREFIX is empty in config.ini (for root deployment),
    # then these lines would simply be:
    # ProxyPass / http://<container_internal_ip>:5000/ nocanon
    # ProxyPassReverse / http://<container_internal_ip>:5000/

    ProxyPass /<BASE_URL_PREFIX>/ http://<container_internal_ip>:5000/<BASE_URL_PREFIX>/ nocanon
    ProxyPassReverse /<BASE_URL_PREFIX>/ http://<container_internal_ip>:5000/<BASE_URL_PREFIX>/

    ErrorLog /var/log/httpd/gallery_error.log
    CustomLog /var/log/httpd/gallery_access.log combined

    <Directory />
        Require all granted
    </Directory>
</VirtualHost>

